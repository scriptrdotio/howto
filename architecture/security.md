# Security

Security is of paramount importance in software systems and applications. Scriptr.io deals with security at three levels: 
- [Authentication](./security.md#authentication)
- [Authorizations](./security.md#authorizations)
- [Encryption](./security.md#ecryption)

# Authentication

## Account owner

The owner of a scriptr.io account signs into the workspace (web IDE) using his account user name and password, which should never be shared with anyone. Since it is possible to create more than one application for a same account, the account owner has a specific **account owner authentication token** that will identify him against the application (more on this in the next sections). Those tokens should never be shared as well, and never be used within applications.

## User and device directory
Each application of a scriptr.io account has its own user and device directory. Directories are not shared across applications, which means that a device or a user who is identified in an application is unknown to other applications of the same scriptr.io account.

### Credentials
Adding a new a user or a device into the directory can be done from the workspace or using the corresponding APIs. It requires providing a user name (respectively a device name) and a password that will be used to generate an **authentication token**. If a token is lost or corrupted, a new token can be regenerated, which automatically invalidates the other one. It is also possible to modify the password, which leads to the automatic regeneration of an authentication token, and the invalidation of the former password and token respectively.

#### HTTP
Users and devices accessing your application by issuing authenticated **http requests** to it's API. A request is authenticated by scriptr.io if it contains a valid authentication token pertaining to the directory of the targeted application. 

User interfaces served by your application can also leverage the [Login component](https://github.com/scriptrdotio/login), which allow the user to sign-in by entering their username and password in a login form. The login component will generate a session token, automatically redirecting users to the login form upon session expiration.

#### MQTT 
Client applications that invoke your application's API over mqtt(s) should authenticated using a **username and password generated by scriptr.io**, used when establishing the mqtt connection with scriptr.io. For more, please refer to [this document](https://www.scriptr.io/documentation#documentation-communicating-over-mqttScriptr.ioMQTTBroker).

#### AMQP
Similarly to MQTT, client application connecting to your application's API over amqp should authenticate by providing a **username and password generated by scriptr.io**, uses when establishing the amqp connection with. For more, please check this [document](https://www.scriptr.io/documentation#documentation-communicating-over-amqpScriptr.ioAMQPBroker).

#### WebSockets
Client applications interacting with your application's API via web socket will authenticate with a valid **authentication token** when [establishing the connection](https://www.scriptr.io/documentation#documentation-realtimecommunicationReal-timeCommunication).

### Authenticating against third party systems
Your application will probably interact with third-party systems against which it should authenticate. Authentication will strongly depend on the technique used by the third party. In addition to using traditional authentication means (bearer token, username/passwords, etc.) when issusing requests/message to those third parties, you can leverage more advanced techniques that are natively available in scriptr.io and directly usable from within your scripts:

- OAuth
- Client-side SSL/TLS certifcates
- Json Web Tokens.

## Authorizations
Scriptr.io handles authorisations via Access Control Lists (ACL) at two levels:
- scripts (manage permissions on the execution of the logic in the scripts)
- data (manage permissions on your data, at the field level)

## Roles and Groups
